<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">

    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.5.1/jquery.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.16.0/umd/popper.min.js"></script>
    <script src="https://maxcdn.bootstrapcdn.com/bootstrap/4.5.0/js/bootstrap.min.js"></script>

    <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/4.5.0/css/bootstrap.min.css">
    <link rel="stylesheet" href="../resources/css/styles.css">
    <link rel="stylesheet" href="https://use.fontawesome.com/releases/v5.11.2/css/all.css">

    <title>Foro</title>
</head>

<body>
    <!-- Header -->
    <header>
        <div class="jumbotron head_foot">
            <img src="../resources/images/ecuador.png" class="float-right imagen_header" alt="Escudo de Armas del Ecuador">
            <h1><b>@prendEC</b></h1>
        </div>
    </header>
    <!-- Navbar -->
    <nav class="navbar navbar-expand-md navbar-dark bg-dark sticky-top">
        <div class="container">
            <a class="navbar-brand mx-auto mr-md-3 " href="../public_mod/informativo.html">AprendEC</a>

            <button class="navbar-toggler mx-auto mb-2" data-toggle="collapse" data-target="#colapsado" aria-label="Toggle navigation">
                <span class="navbar-toggler-icon"></span>
            </button>

            <div class="collapse navbar-collapse" id="colapsado">
                <ul class="navbar-nav mx-xs-auto ml-md-3">
                    <li class="nav-item">
                        <form class="form-inline">
                            <input class="form-control mr-sm-2 " id="barraBuscar" type="search" placeholder="Buscar" name="busqueda">
                            <button class=" btn btn-outline-primary mx-auto my-2 my-sm-0" type="submit"><i
                                    class="fas fa-search"></i></button>
                        </form>
                    </li>
                </ul>
                <ul class="navbar-nav ml-md-auto mx-xs-auto" id="hey">
                    <li class="nav-item  mx-auto">
                        <a class="nav-link" href="#"><i class="fas fa-bell"></i></a>
                    </li>
                    <!-- Dropdown -->
                    <li class="nav-item dropdown mx-auto">
                        <a class="nav-link dropdown-toggle" href="#" id="navbardrop" data-toggle="dropdown">
                            <i class="far fa-user"></i>
                            <span>Nombre de Usuario</span>
                        </a>
                        <div class="dropdown-menu dropdown-menu-right">
                            <a class="dropdown-item" href="../public_mod/modPublicaciones.html">Publicaciones</a>
                            <a class="dropdown-item" href="../participacion/">Participación</a>
                            <a class="dropdown-item" href="../manejoCuenta/cuenta.html  ">Cuenta</a>
                            <a class="dropdown-item" href="../compras/">Compras</a>
                            <a class="dropdown-item" href="../tienda/">Tienda</a>
                            <a class="dropdown-item" href="../tienda/gestionVentas.html">Gestión de Ventas</a>
                            <a class="dropdown-item" href="../registro/login.html">Cerrar Sesión</a>
                        </div>
                    </li>
                </ul>

            </div>
        </div>
    </nav>


    <div class="container-expand">
        <div class="row">
            <div class="col-sm-3">
                <ul class="list-group">
                    <div class="list-group list-group-flush ">
                        <a href="#" class="list-group-item list-group-item-action active">Foros</a>
                        <a href="modPublicaciones.html" class="list-group-item list-group-item-action">Posts</a>
                    </div>
                </ul>
                <div class="text-center mt-4">
                    <a href="../ranking/rankingU.html" class="btn btn-warning" role="button"> RANKING </a>
                </div>
            </div>
            <div class="col-sm-9 mt-4" >
                <div class="container-fluid">
                    <div class="btn-group d-flex" role="group">
                        <button id="btnCrear" type="button" class="btn btn-outline-primary">Crear</button>
                        <button id="btnEditar" type="button" class="btn btn-outline-primary">Editar</button>
                        <button id="btnEliminar" type="button" class="btn btn-outline-primary">Eliminar</button>
                        <button id="btnVer" type="button" class="btn btn-outline-primary">Ver</button>
                        <button id="btnPublicar" type="button" class="btn btn-outline-primary">Publicar</button>
                    </div>

                </div>
                <div class="container mt-4">
                    <!-- Ejemplo de como debería verse después de guardarse en la base de datos -->
                    <div class="row" id="showPost1">
                        <div class="col-sm-1 mt-5">
                            <input type="checkbox" id="revisor1" name="checkBox1">
                        </div>
                        <div class="col-sm-11">
                            <h3>Compilación del kernel de Linux. Step by Step</h3>
                            <p><strong>Comentarios: </strong>0<br>
                                <strong>Vistas: </strong>0 <br>
                                <strong>Calificación: </strong>0.0 <br>
                                <strong>Estado: </strong> <em id="estadoPost1">No publicado</em><br>
                                <strong>Tags:</strong> <em>#SistemasOperativos #SystemAdministration</em><br>
                            </p>
                        </div>
                        <div class="container"> 
                            <hr>
                        </div>               
                    </div>
                </div>
            </div>
        </div>
    </div>

        <!-- Footer -->
    <footer>
        <div class="jumbotron text-center head_foot">
            <p>Aprendizaje Online para todo el Ecuador</p>
            AprendEC 2020 <i class="far fa-copyright"></i>
        </div>
    </footer>

    
    <script>
        $(function () {
            $('#btnCrear').click(function(){
                window.open('editorForo.html','_self')
            });
            $('#btnPublicar').click(function(){
                //Debajo debe ir el evento que se genera. En este caso la publicación del foro en el sitio
                var revisarCheck=revisor1.checked;
                //Antes de revisar el ckecked, debe verificar si ese post ya ha sido publicado. Para eso 
                //Necesitamos lectura de la base de datos
                if(revisarCheck==true){;
                    //Aquí se debería verificar en la base de datos por motivos de seguridad
                    if($('#estadoPost1').text()!='Publicado'){
                        var respuesta=confirm('¿Está seguro de publicar el foro?',revisarCheck);
                        if(respuesta==true){
                            revisor1.checked=false;
                            $('#estadoPost1').text('Publicado');
                        }
                    }else{
                        alert('EL foro ya fue publicado');
                    }
                    
                }       
                else{
                    alert('Debe estar marcado al menos un foro');
                }
            });
            
            $('#btnEliminar').click(function(){
                var revisarCheck=revisor1.checked;
                if(revisarCheck==true){
                    var respuesta=confirm('¿Esta seguro de eliminar el/los post/s?. Si acepta se eliminará permanentemente.');
                    if(respuesta==true){
                        $('#showPost1').remove();
                    }
                }else{
                    alert('Debe seleccionar al menos un foro');
                }
                
            });

            $('#btnEditar').click(function(){
                //Aquí se debe obtener de la base de datos el foro publicado y mandarlo al editor de texto
            });

            $('#btnVer').click(function(){
                //Aquí se debe obtener de la base de datos lo que se debe mostrar y mandarlo al html vista para visualizarlo. 
                var revisarCheck=revisor1.checked;
                if(revisarCheck==true){
                    window.open('viewForo.html','_blank');
                }else{
                    alert('Debe seleccionar un foro.');
                }
            });

        });
    </script>


    <footer>
        <div class="jumbotron text-center head_foot">
            <p>Aprendizaje Online para todo el Ecuador</p>
            AprendEC 2020 <i class="far fa-copyright"></i>
        </div>
    </footer>

</body>

</html>